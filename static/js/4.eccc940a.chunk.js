(this["webpackJsonpmygame-dl"]=this["webpackJsonpmygame-dl"]||[]).push([[4],{64:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(3),i=a(36),r=a(7),l=a(0),u=a.n(l),f=a(19),o=a(62),s=a(61),d=a(29),m=a.n(d),v=a(38),b=a.n(v),j=a(2),O=a(1),y=a(27),g=a(20),p=Object(l.memo)((function(e){var t=e.index,a=e.item,n=e.lang,i=e.setFacility,r=a.image,f=a.type,o=a.value,s=Object(g.a)(r,n,"halidom"),d="facility/".concat(r),m=Object(l.useMemo)((function(){return"event"===f?35:Object(O.m)(f)}),[f]),v=Object(l.useCallback)((function(e){var a=e.value;i((function(e){return e.map((function(e,n){return n===t?Object(c.a)({},e,{value:a}):e}))}))}),[t,i]);return u.a.createElement("div",{className:"facility-item"},u.a.createElement(y.d,{image:d,size:"lg",title:s,onClick:function(){i((function(e){return e.filter((function(e,a){return a!==t}))}))}}),u.a.createElement(y.g,{max:m,value:o,onChange:v}))})),h=Object(l.memo)((function(e){var t=e.rowIndex,a=e.columnIndex,n=e.style,c=e.data[2*t+a];if(void 0===c)return null;var i=Object(r.a)(c,2),l=i[0],f=i[1],o="material/".concat(l);return u.a.createElement("div",{style:n,className:"flex-v"},u.a.createElement(y.d,{image:o,size:"md"}),u.a.createElement("div",{style:{flex:"1",textAlign:"center"}},f))})),E=["del","refresh","save","add"],k=m()((function(e){return e}),(function(e){var t=e.type,a=e.field,n=Object(r.a)(e.value,2),c=n[0],i=n[1];if(c===i)return{};for(var l={},u=c;u<i;u+=1)Object.entries(j.j[t][u]).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(j.p)(n,a);l[i]=(l[i]||0)+c}));return l}))((function(e){var t=e.type,a=e.field,n=Object(r.a)(e.value,2),c=n[0],i=n[1];return c===i?"NONE":"".concat(t,"_").concat(a,"_").concat(c,"_").concat(i)}));var w=function(){var e=Object(f.i)().lang,t=void 0===e?"en":e,a=Object(l.useState)([]),d=Object(r.a)(a,2),m=d[0],v=d[1],w=Object(l.useState)({type:"dojo",field:""}),C=Object(r.a)(w,2),x=C[0],N=C[1],F=Object(l.useMemo)((function(){return j.g.map((function(e){return{value:e,label:Object(g.a)(e,t)}}))}),[t]),M=Object(l.useMemo)((function(){var e;switch(x.type){case"dojo":e=j.m;break;case"tree":e=["Flame"];break;default:e=j.d}return e.map((function(e){return{value:e,label:Object(g.a)(e,t)}}))}),[x.type,t]),_=Object(O.w)((function(e){switch(e.currentTarget.name){case"add":var t,a,n=x.type,c=x.field;if("event"!==n){if(""===c)return;t=Object(j.p)(n,c),a=Object(O.f)({type:n})}else t="event",a=35;v((function(e){return[].concat(Object(i.a)(e),[{id:b()(),image:t,type:n,field:c,value:[0,a]}])}));break;case"del":Object(O.s)("dragalialost-facility"),v([]);break;case"save":Object(O.t)("dragalialost-facility",m);break;case"refresh":var r=Object(O.q)("dragalialost-facility");if(null===r)return;v(r)}})),q=Object(l.useCallback)((function(e){var t=e.name,a=e.value;N((function(e){return Object(c.a)({},e,Object(n.a)({},t,a))}))}),[]);Object(l.useEffect)((function(){var e=Object(O.q)("dragalialost-facility");if(null===e){var t=Object(O.q)("dragalialost-halidom");if(null!==t){var a=[];j.f.forEach((function(e){var n=t[e],c=n.id,i=n.level,r=Object(O.f)(n);if(i!==r){var l=e.split("_"),u=l[l.length-2],f=l[l.length-3],o=c;"eventE"!==u&&"eventW"!==u||(u="event",f="event",o="event"),a.push({id:b()(),image:o,type:u,field:f,value:[i,r]})}})),0!==a.length&&v(a)}}else v(e)}),[]),Object(l.useEffect)((function(){var e=x.type,t=x.field;if("tree"!==e||"Flame"===t){if(""!==t){if("dojo"===e){if(j.m.includes(t))return}else if("event"!==e&&j.d.includes(t))return;N((function(e){return Object(c.a)({},e,{field:""})}))}}else N((function(e){return Object(c.a)({},e,{field:"Flame"})}))}),[x]);var z=Object(l.useMemo)((function(){var e={};return m.forEach((function(t){var a=k(t);Object.entries(a).forEach((function(t){var a=Object(r.a)(t,2),n=a[0],c=a[1];e[n]=(e[n]||0)+c}))})),Object.entries(e).filter((function(e){var t=Object(r.a)(e,2);t[0];return 0!==t[1]}))}),[m]);return u.a.createElement("main",{id:"facility"},u.a.createElement("div",{id:"facility-col1"},u.a.createElement(y.a,{btns:E,onClick:_}),u.a.createElement("div",{className:"grid-2"},u.a.createElement(y.f,{name:"type",label:Object(g.a)(x.type,t),value:x.type,options:F,onChange:q}),u.a.createElement(y.f,{disabled:"event"===x.type,name:"field",label:Object(g.a)(x.field,t),value:x.field,options:M,onChange:q})),u.a.createElement("div",{className:"list"},m.map((function(e,a){return u.a.createElement(p,{key:e.id,index:a,item:e,lang:t,setFacility:v})})))),u.a.createElement("div",{id:"facility-col2",className:"list"},u.a.createElement(s.a,null,(function(e){var t=e.height,a=e.width;return u.a.createElement(o.a,{width:a,height:t,itemData:z,columnCount:2,columnWidth:a/2-8,rowCount:z.length,rowHeight:64},h)}))))};t.default=w}}]);
//# sourceMappingURL=4.eccc940a.chunk.js.map