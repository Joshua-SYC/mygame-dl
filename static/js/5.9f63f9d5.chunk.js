(this["webpackJsonpmygame-dl"]=this["webpackJsonpmygame-dl"]||[]).push([[5],{63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),l=a(19),i=a(8),u=a(7),m=a(1),o=a(18),s=a(20),d=a(27),b=["adventurer","weapon","wyrmprint1","wyrmprint2","dragon","augments","ability","halidom"];var v=Object(r.b)((function(e){return{theme:e.theme,details:Object(m.e)(e)}}))((function(e){var t=e.disabled,a=e.details,r=e.expend,l=e.lang,i=e.theme,u=e.setExpend,v=Object(o.a)({expend:r});return c.a.createElement("div",{id:"stats-table",className:"paper",style:Object(m.o)(i)},c.a.createElement("div",{id:"header"},c.a.createElement(d.c,{lang:l,disabled:t,title:Object(s.a)("details",l),checked:r,setChecked:u}),c.a.createElement("span",null,"HP"),c.a.createElement("span",null,Object(s.a)("str",l)),c.a.createElement("span",null,Object(s.a)("might",l))),c.a.createElement("div",{id:"body",className:v},b.map((function(e){var t=a[e]||{},r=t.hp,i=void 0===r?"0":r,u=t.str,m=void 0===u?"0":u,o=t.might,d=void 0===o?"0":o;return c.a.createElement(n.Fragment,{key:e},c.a.createElement("span",null,Object(s.a)(e,l)),c.a.createElement("span",null,i),c.a.createElement("span",null,m),c.a.createElement("span",null,d))}))),c.a.createElement("div",{id:"footer",className:v},c.a.createElement("span",null,Object(s.a)("total",l)),c.a.createElement("span",null,Object(m.a)(a.total.hp)),c.a.createElement("span",null,Object(m.a)(a.total.str)),c.a.createElement("span",null,a.total.might)))})),f=a(5),p=a(3),j=a(2),E=Object.keys(j.e),O=Object(n.memo)((function(e){var t=e.name,a=e.value,r=e.onChange,l=void 0===r?function(){}:r,i=Object(n.useRef)(),m=Object(n.useState)(!1),s=Object(u.a)(m,2),b=s[0],v=s[1],f=Object(o.a)("arrow",b?"up":"down"),p="".concat("/mygame-dl","/images/dungeon/").concat(a,".png"),j=function(e){var a=e.currentTarget.getAttribute("value");l({name:t,value:a}),i.current&&i.current.focus()};return Object(n.useEffect)((function(){var e=function(){v(!1)};return setTimeout((function(){b?window.addEventListener("click",e):window.removeEventListener("click",e)}),0),function(){window.removeEventListener("click",e)}}),[b]),c.a.createElement("div",{className:"select select-enemy"},c.a.createElement("div",{ref:i,className:"select-control white",style:{backgroundImage:"url(".concat(p,")")},role:"button",tabIndex:"0",onClick:function(){v((function(e){return!e}))},onKeyDown:null},c.a.createElement("span",{className:f})),b&&c.a.createElement("ul",{className:"select-list"},E.map((function(e){var t=Object(o.a)("select-option",{focus:e===a});return c.a.createElement("li",{key:e,role:"option","aria-selected":e===a,className:t,value:e,onClick:j,onKeyDown:null},c.a.createElement(d.d,{name:e,image:"dungeon/".concat(e)}))}))))}));var g=Object(r.b)((function(e,t){var a=Object(m.d)(e,t);return{hp:a.hp,min:a.min,max:a.max}}))((function(e){var t,a=e.hp,n=e.min,r=e.max,l="linear-gradient(120deg, green, #4ba946 "+"".concat(t=a>r?100:a<=n?0:100*(a-1-n)/(r-n),"%, #deb887 ").concat(t+5,"%, #be3223 , #800000)");return c.a.createElement("div",{id:"damage-bar",style:{background:l}},c.a.createElement("span",null,n),c.a.createElement("span",{style:{fontSize:"20px"}},"".concat(a," (").concat(t.toFixed(2),"%)")),c.a.createElement("span",null,r))})),h=["multiplier","exHp","hp","exDef","def","res","dcrStr"],y=["10450102","10450302"];var k=Object(r.b)((function(e){return{theme:e.theme,adventurer:e.items.adventurer}}))((function(e){var t=e.adventurer,a=e.lang,r=e.theme,l=Object(n.useState)({dcrStr:"",def:"",difficulty:"VH",enemy:"",exHp:"",exDef:"",hp:"",multiplier:"",res:""}),i=Object(u.a)(l,2),o=i[0],b=i[1],v=Object(n.useRef)(),E=Object(n.useMemo)((function(){return["EX","VH","H","N"].map((function(e){return{value:e,label:Object(s.a)(e,a)}}))}),[a]),k=Object(n.useCallback)((function(e){var t=e.name,a=e.value;b((function(e){return Object(p.a)({},e,Object(f.a)({},t,a))}))}),[]),N=Object(n.useCallback)((function(e){var t=e.target,a=t.name,n=t.value;b((function(e){return Object(p.a)({},e,Object(f.a)({},a,n))}))}),[]);return Object(n.useEffect)((function(){if(""!==o.enemy){var e=j.e[o.enemy].info[o.difficulty].multiplier;b((function(t){return Object(p.a)({},t,{multiplier:e})}))}}),[o.enemy,o.difficulty]),Object(n.useEffect)((function(){var e=t||{},a=e.Element,n=e.Weapon,c=e.Id,r=e.Rarity,l=e.ex;if(v.current!==a){var i=j.c[a];b((function(e){return Object(p.a)({},e,{enemy:i})})),v.current=a}var u="",m="";if("Axe"===n||"Lance"===n){var o=j.b[n][r][l];"Axe"!==n||y.includes(c)?"Lance"===n&&(u=o):m=o}b((function(e){return Object(p.a)({},e,{exHp:u,exDef:m})}))}),[t.Id,t.ex]),c.a.createElement(c.a.Fragment,null,c.a.createElement(O,{name:"enemy",value:o.enemy,onChange:k}),c.a.createElement("div",{className:"grid-2 paper",style:Object(m.o)(r)},c.a.createElement("div",null,Object(s.a)("difficulty",a),c.a.createElement(d.f,{name:"difficulty",options:E,label:Object(s.a)(o.difficulty,a),value:o.difficulty,onChange:k})),h.map((function(e){var t="multiplier"===e?"0.01":"1";return c.a.createElement("div",{key:e},Object(s.a)(e,a),c.a.createElement(d.e,{name:e,step:t,value:o[e],onChange:N}))}))),t&&c.a.createElement(g,{settings:o}))}));var N=Object(r.b)((function(e){return{adventurer:e.items.adventurer}}))((function(e){var t=e.adventurer,a=e.lang,r=Object(n.useState)(!1),l=Object(u.a)(r,2),i=l[0],o=l[1];return c.a.createElement("div",{id:"stats-col1",ref:m.r.col1},t&&c.a.createElement(c.a.Fragment,null,c.a.createElement(v,{disabled:null===t,lang:a,expend:i,setExpend:o}),!i&&c.a.createElement(k,{lang:a})))}));var w={delBuild:i.b,loadBuild:i.c,saveBuild:i.i},x=Object(r.b)((function(e){var t=e.builds;return{adventurer:e.items.adventurer,builds:t}}),w)((function(e){var t=e.adventurer,a=e.builds,r=e.delBuild,l=e.loadBuild,i=e.saveBuild,s=Object(n.useState)(!1),b=Object(u.a)(s,2),v=b[0],f=b[1],p=null===a,E=Object(o.a)("arrow",v?"up":"down",{disabled:p}),O=function(e){var t=e.currentTarget.value;if("del"===e.target.name)r(t);else{var n=a[t];l(n)}};return Object(n.useEffect)((function(){var e=function(){f(!1)};return setTimeout((function(){v?window.addEventListener("click",e):window.removeEventListener("click",e)}),0),function(){window.removeEventListener("click",e)}}),[v]),c.a.createElement("div",{className:"split-btn"},c.a.createElement("button",{type:"button",disabled:null===t,onClick:i},"SAVE"),c.a.createElement("button",{type:"button",className:Object(o.a)("toggle-split",{disabled:p}),disabled:p,onClick:function(){f((function(e){return!e}))}},c.a.createElement("span",{className:E})),v&&a&&c.a.createElement("ul",{className:"select-list"},Object.entries(a).map((function(e){var t=Object(u.a)(e,1)[0],a=j.n.adventurer[t],n=Object(m.j)(a,"adventurer");return c.a.createElement("li",{key:t,role:"option","aria-selected":!1,className:"select-option",value:t,onClick:O,onKeyDown:null},c.a.createElement(d.d,{image:n,size:"md"}),c.a.createElement("button",{type:"button",name:"del"},c.a.createElement(d.d,{image:"icon/cross"})))}))))})),C=a(36),I={mana:{3:["30","20","10","0"],4:["40","30","20","10","0"],5:["50","45","40","30","20","10","0"]},curRarity:{3:["5","4","3"],4:["5","4"],5:["5"]},default:["4","3","2","1","0"]},S=Object(n.memo)((function(e){var t=e.name,a=e.value,r=e.rarity,l=e.spiral,i=e.onChange,u=Object(n.useMemo)((function(){var e=[];switch(t){case"mana":e=l&&"5"===r?["70"].concat(Object(C.a)(I.mana[5])):I[t][r];break;case"curRarity":e=I[t][r];break;case"ex":case"unbind":e=I.default}return e.map((function(e){return{value:e,label:e}}))}),[t,r,l]),m=u.length<2;return c.a.createElement(d.f,{disabled:m,name:t,value:a,options:u,onChange:i})}));var H={updateItem:i.o},R=Object(r.b)((function(e){var t=e.focused,a=e.items;return{focused:t,theme:e.theme,item:a[t]}}),H)((function(e){var t,a=e.focused,r=e.item,l=e.lang,i=e.theme,u=e.updateItem,b=r||{},v=b.level,j=b.bond,E=b.curRarity,O=b.Rarity,g=b.unbind,h=Object(n.useRef)(),y="adventurer"===(t=a)?["level","curRarity","augHp","augStr","mana","ex"]:"dragon"===t?["level","unbind","augHp","augStr","bond"]:["level","unbind","augHp","augStr"],k=function(e){var t,n=e.target,c=n.name,l=n.value;if("adventurer"===a&&"5"===r.LimitBreak)t=100;else{var i="level"===c?a:c,o="adventurer"===a?E:O;t=Object(m.m)(i,o,g)}var s=l>t?t:l;r[c]!==s&&u({itemKey:a,updates:Object(f.a)({},c,s)})},N=Object(m.w)((function(e){var t=function(e,t){if(r[e]===t)return null;var n=Object(f.a)({},e,t);switch(e){case"curRarity":n=Object(p.a)({},n,{level:Object(m.m)(a,t),mana:Object(m.m)("mana",t),ex:"5"===t?"4":"0"});break;case"mana":var c=Object(m.m)(a,E);n.ex=t>="50"?"4":"0","70"===t?n.level=100:v>c&&(n.level=c);break;case"ex":n=Object(p.a)({},n,{curRarity:"5",mana:"45"});break;case"unbind":var l=Object(m.m)(a,O,t);n.level=l}return n}(e.name,e.value);null!==t&&u({itemKey:a,updates:t})})),w=function(e){var t=e.target.name,n=Object(m.m)(t),c=Number(r[t])===n?"":n;u({itemKey:a,updates:Object(f.a)({},t,c)})};return Object(n.useEffect)((function(){var e;clearTimeout(h.current),""===v||"0"===v?e="level":""!==j&&"0"!==j||(e="bond"),void 0!==e&&(h.current=setTimeout((function(){u({itemKey:a,updates:Object(f.a)({},e,1)})}),1e3))}),[v,j,a,u]),null===r?null:c.a.createElement("div",{className:"grid-2 paper",style:Object(m.o)(i)},y.map((function(e){var t,a=r[e],n=void 0===a?"":a;if("curRarity"===e||"unbind"===e||"mana"===e||"ex"===e)return"curRarity"===e?t=O:"mana"===e&&(t=E),c.a.createElement("div",{key:e},Object(s.a)(e,l),c.a.createElement(S,{key:e,name:e,value:n,rarity:t,spiral:5===r.breakLimit,onChange:N}));if("augHp"===e||"augStr"===e){var i=Object(m.m)(e),u=Object(o.a)("arrow",Number(n)===i?"left":"right");return c.a.createElement("div",{key:e},Object(s.a)(e,l),c.a.createElement("div",{className:"input-btn"},c.a.createElement(d.e,{name:e,value:n,onChange:k}),c.a.createElement("button",{type:"button",tabIndex:"-1",name:e,onClick:w},c.a.createElement("span",{className:u}))))}return c.a.createElement("div",{key:e},Object(s.a)(e,l),c.a.createElement(d.e,{name:e,value:n,onChange:k}))})))}));var K={maxItem:i.f,resetItems:i.g,saveBuild:i.i,selectFocus:i.j},L=Object(r.b)((function(e){return{focused:e.focused,items:e.items,theme:e.theme}}),K)((function(e){var t=e.focused,a=e.items,r=e.lang,l=e.maxItem,i=e.theme,u=e.resetItems,b=e.selectFocus,v=Object(n.useCallback)((function(e,t){b(t)}),[b]),f=function(e){l(e.target.name)};return c.a.createElement("div",{id:"stats-col2",ref:m.r.col2},c.a.createElement("div",{className:"grid-2"},c.a.createElement(x,null),c.a.createElement("button",{type:"button",onClick:function(){u(),window.scroll(m.r.col2.current.offsetTop-48,0)}},"reset")),c.a.createElement("div",{className:"avatar-list paper",style:Object(m.o)(i)},j.i.map((function(e){var n=Object(o.a)("avatar",{active:e===t}),l=a[e],i=null===l?Object(s.a)(e,r):l.Name[r]||l.Name.en,u=Object(m.j)(l,e),b=l||{},p=b.augHp,j=void 0===p?"":p,E=b.augStr,O=void 0===E?"":E,g=Number(j)+Number(O);return c.a.createElement("div",{key:e,className:"avatar-item"},c.a.createElement("div",{className:n},c.a.createElement(d.d,{name:e,image:u,title:i,onClick:v}),0!==g&&c.a.createElement("span",null,"+".concat(g))),null!==l&&c.a.createElement("button",{type:"button",className:"max-button",name:e,onClick:f},"MAX"))}))),c.a.createElement(R,{lang:r}))}));var B={selectOption:i.l,resetOptions:i.h},F=Object(r.b)((function(e){var t=e.focused,a=e.options,n=e.theme;return{fields:Object(m.h)(t),options:a,theme:n}}),B)((function(e){var t=e.fields,a=e.lang,r=e.options,l=e.search,i=e.theme,u=e.resetOptions,o=e.selectOption,s=e.setSearch,b=Object(n.useCallback)((function(e){var t=e.target,a=t.checked,n=t.name,c=t.value;o({checked:a,name:n,value:c})}),[o]);return c.a.createElement("div",{id:"item-filter",className:"paper",style:Object(m.o)(i)},c.a.createElement("div",{id:"item-options"},t.map((function(e){return c.a.createElement(d.b,{icon:!0,key:e,group:e,lang:a,options:r[e],onChange:b})}))),c.a.createElement("div",{className:"input-btn"},c.a.createElement(d.e,{type:"text",placeholder:"Search",value:l,onChange:function(e){s(e.target.value)}}),c.a.createElement("button",{type:"button",onClick:function(){u(),s("")}},"Clear")))})),T=a(62),z=a(61);var A={selectItem:i.k},D=Object(r.b)((function(e){return{focused:e.focused,theme:e.theme}}),A)((function(e){var t=e.data,a=e.focused,n=e.index,r=e.style,i=e.theme,u=e.selectItem,o=Object(l.i)().lang,s=void 0===o?"en":o,b=t[n],v=b.Skill,f=b.Icon,p=b.Name,j=p[s],E=p.en,O=Object(m.j)(b,a),g=Object(m.w)((function(){u(a,b),Object(m.u)(m.r.col2)}));return c.a.createElement("div",{className:"item",style:r},c.a.createElement("div",{className:"item-content",style:Object(m.n)(i)},c.a.createElement(d.d,{image:O,size:"md",onClick:g}),c.a.createElement("span",{className:"name"},j||E),"weapon"===a&&(v?c.a.createElement(d.d,{size:"sm",image:"skills/".concat(v.Image),title:v.Name}):c.a.createElement("span",null)),f&&f.map((function(e){return c.a.createElement(d.d,{key:e.Name,size:"sm",image:"abilities/Icon_Ability_".concat(e.Image),title:e.Name})}))))}));var M=Object(r.b)((function(e,t){return{focused:e.focused,options:e.options,theme:e.theme,list:Object(m.l)(e,t)}}))((function(e){var t=e.options,a=e.focused,r=e.list,l=e.theme,i=Object(n.useRef)();return Object(n.useEffect)((function(){i.current&&i.current.scrollToItem(0)}),[a,t]),c.a.createElement("div",{className:"list",style:Object(m.o)(l)},c.a.createElement(z.a,null,(function(e){var t=e.height,a=e.width;return c.a.createElement(T.b,{ref:i,height:t,width:a,itemSize:68,itemCount:r.length,itemData:r},D)})))}));var P=Object(r.b)((function(e){return{focused:e.focused}}))((function(e){var t=e.focused,a=e.lang,r=Object(n.useState)(""),l=Object(u.a)(r,2),i=l[0],m=l[1];return Object(n.useEffect)((function(){m("")}),[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(F,{lang:a,search:i,setSearch:m}),c.a.createElement(M,{lang:a,search:i}))}));var V={updateHalidom:i.n},J=Object(r.b)((function(e,t){var a=function(e){var t=e.halidomKey,a=e.data,n=e.columnIndex,c=e.rowIndex;if(t)return t;var r=a.cols;return a.keyArr[r*c+n]}(t);return{halidomKey:a,item:e.halidom[a]}}),V)((function(e){var t=e.halidomKey,a=e.item,r=e.style,i=e.updateHalidom,u=Object(l.i)().lang,o=a.id,b=a.level,v="facility/".concat(o),f=Object(s.a)(o,u,"halidom"),p=Object(m.f)(a),j=Object(n.useCallback)((function(e){var t=e.name,a=e.value;i({halidomKey:t,level:a})}),[i]);return c.a.createElement("div",{style:r,className:"halidom-item"},c.a.createElement(d.d,{image:v,size:"lg",title:f}),c.a.createElement(d.g,{name:t,value:b,max:p,onChange:j}))})),X=["del","refresh","save"];var _={loadHalidom:i.e},W=Object(r.b)((function(e){return{halidom:e.halidom,theme:e.theme,keyList:Object(m.i)(e)}}),_)((function(e){var t=e.halidom,a=e.keyList,n=e.theme,r=e.loadHalidom,l=Object(m.w)((function(e){switch(e.currentTarget.name){case"del":Object(m.s)("dragalialost-halidom");break;case"refresh":r();break;case"save":Object(m.t)("dragalialost-halidom",t)}}));return null===a?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{btns:X,onClick:l}),c.a.createElement("div",{className:"list paper",style:Object(m.o)(n)},a.map((function(e){return c.a.createElement(J,{key:e,halidomKey:e})}))))}));var q={setPanel:i.m},G=Object(r.b)((function(e){var t=e.items;return{panel:e.panel,adventurer:t.adventurer}}),q)((function(e){var t=e.adventurer,a=e.lang,n=e.panel,r=e.setPanel,l=null===t;return c.a.createElement("div",{id:"stats-col3",ref:m.r.col3},c.a.createElement("div",null,c.a.createElement(d.c,{disabled:l,checked:n,lang:a,value:"halidom",setChecked:r})),n?c.a.createElement(W,null):c.a.createElement(P,{lang:a}))}));var Q={loadHalidom:i.e,loadBuilds:i.d,selectFocus:i.j},U=Object(r.b)(null,Q)((function(e){var t=e.loadBuilds,a=e.loadHalidom,r=e.selectFocus,i=Object(l.i)().lang,u=void 0===i?"en":i;return Object(n.useEffect)((function(){a(),t(),r("adventurer")}),[t,a,r]),c.a.createElement("main",{id:"stats"},c.a.createElement(N,{lang:u}),c.a.createElement(L,{lang:u}),c.a.createElement(G,{lang:u}))}));t.default=U}}]);
//# sourceMappingURL=5.9f63f9d5.chunk.js.map